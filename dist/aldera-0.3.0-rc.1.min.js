/*
 * Build Date: Tuesday, February 16th, 2016, 12:13:20 PM
 *
 * aldera.js v0.3.0-rc.1
 * https://github.com/markwise/alderajs
 *
 * Copyright (c) 2016 Mark Wise, contributers
 * Released under the terms of the MIT license
 */

var aldera=function(a){"use strict";a=void 0;var b=(jQuery("html").attr("data-root")||"/").replace(/\\/g,"/").replace(/([^\/])$/,"$1/"),c={},d=function(a){return"string"==typeof a},e=function(a){return"number"==typeof a},f=function(a){return"[object Object]"==={}.toString.call(a)},g=function(a){return Array.isArray(a)},h=function(a){return"function"==typeof a},i=function(){var a=function(b,c,d){return function(){var e=b[c],f=[].slice.call(arguments);c<b.length-1&&f.push(a(b,c+=1,d)),e.apply(d,f)}};return function(b,c){0!==b.length&&a(b,0,this)(c)}}(),j=function(a){var c=jQuery.Deferred();return jQuery.get(b+a).done(function(a){var b=aldera.config.get("template.compile");c.resolve(b(a))}),c.promise()},k=function(){var a=function(a){var b=a.match(/^\w+/);return"<"+(b?b[0]:"div")+">"},b=function(a){var b=a.match(/\.[\w:-]+/g);return b?b.join(" ").replace(/\./g,""):void 0};return function(c){return d(c)||(c=""),jQuery(a(c)).addClass(b(c))}}(),l=function(a){var b=f(a.opts)?a.opts:{};this._events={},this._outlets={},this.el=k(a.aspect||this.aspect).addClass(this.defaultTemplateName).attr("data-view",this.constructor.name),this.data=new q(a.data),this.addEvents(this.events),this.addOutlets(a.outlets||{}),i.call(this,this.init,b)},m=function(){var a=function(a,b){var c=aldera.mixin(a);c&&c.call(this,f(b)?b:{})},b=function(a){return a=a.split(/\s+/),{events:a[0].split("|"),targets:(a[1]||"").split("|")}},e=function(){this._eventsDisabled=!1,this.addEvents(this._events)},g=function(){this._eventsDisabled=!0,this.el.off()},i=function(a){var c=this.el,d=this._events;a=b(a),jQuery.each(a.events,function(b,e){jQuery.each(a.targets,function(a,b){d[(e+" "+b).trim()]=void 0,self._eventsDisabled||c.off(e,b)})})},k=function(a){var b=this;jQuery.each(a,function(a,c){b.removeEvent(c)})},l=function(a,c){var e,f=this,g=this.el,h=this._events;void 0!==c&&(this.removeEvent(a),a=b(a),d(c)&&(c=this[c]),e=jQuery.proxy(c,f),jQuery.each(a.events,function(b,d){jQuery.each(a.targets,function(a,b){h[(d+" "+b).trim()]=c,f._eventsDisabled||g.on(d,b,e)})}))},m=function(a){var b=this;jQuery.each(a,function(a,c){b.addEvent(a,c)})},n=function(a,b){this.el.find('[data-outlet="'+a+'"]').replaceWith(b.el)},o=function(){var a=this;jQuery.each(a._outlets,function(b,c){n.call(a,b,c)})},p=function(a,b){b.el.attr("data-outlet",a),this._outlets[a]=b},q=function(a){var b=this;jQuery.each(a,function(a,c){b.addOutlet(a,c)})},r=function(a,b,c,d){var e=this;e.addOutlet(a,b),n.call(e,a,b),c&&setTimeout(function(){c.call(e,e.el)},d||50)},s=function(a,b,c){var d=this;jQuery.each(a,function(a,b){d.replaceOutlet(a,b)}),b&&setTimeout(function(){b.call(d,d.el)},c||50)},t=function(a){var b,d=a||this.defaultTemplateName,e=c[d];if(void 0===e){if(b=aldera.config.get("template.paths."+d),void 0===b)throw new Error(d+" is not a defined template path");e=c[d]=j(b)}return e},u=function(a,b,c){var d=this;h(a)&&(c=b,b=a,a=void 0),t.call(d,a).done(function(a){var e=d.el;e[0].innerHTML=a({data:d.data.toJSON()}),o.call(d),b&&setTimeout(function(){b.call(d,e)},c||50)})};return function(){this.addEvent=l,this.addEvents=m,this.removeEvent=i,this.removeEvents=k,this.disableEvents=g,this.enableEvents=e,this.mixin=a,this.addOutlet=p,this.addOutlets=q,this.replaceOutlet=r,this.replaceOutlets=s,this.render=u}}(),n=function(a,b){return new Function("fn",["var f = function ",a,"() { fn.apply(this, [].slice.call(arguments)) };",'if (f.name === void 0) f.name = "',a,'";',"return f;"].join(""))(b)},o=function(a,b){var c,d=n(a,l),e=d.prototype;return h(b)&&(b=b()),jQuery.extend(e,b),e.defaultTemplateName=a[0].toLowerCase()+a.substr(1),c=e.init,void 0===c&&(c=function(){this.render()}),g(c)||(e.init=[c]),m.call(e),d},p=function(a,b){this._name=a,this._Fn=o(a,b)};(function(){this.create=function(a){return new this._Fn(f(a)?a:{})},this.remove=function(){aldera._views[this._name]=void 0}}).call(p.prototype);var q=function(a){this.reset(a)};(function(){var a=function(a){var b=a.split(/\./),c=b.length-1,d=this._data;return jQuery.each(b,function(a,b){var e,h=b.match(/^(\w+)((?:\[\d*\])+)$/);if(h){if(d=d[h[1]],!g(d))return d=void 0,!1;if(e=h[2].match(/\[\d*\]/g),jQuery.each(e,function(b,f){return f=f.match(/\d+/),null===f?((e.length-1>b||c>a)&&(d=void 0),!1):g(d)?void(d=d[+f]):(d=void 0,!1)}),void 0===d)return!1}else{if(!f(d))return d=void 0,!1;d=d[b]}}),d},b=function(b){var c=this,d={};return jQuery.each(b,function(b,e){d[e]=a.call(c,e)}),d},c=function(a,b){var c,d,h=a.split(/\./),i=this._data;jQuery.each(h,function(a,b){var j,k,l=b.match(/^(\w+)((?:\[\d*\])+)$/);g(i)&&(e(c)?(k=i[c],i=f(k)?k:i[c]={}):i.push(i={})),l?(c=l[1],j=l[2].match(/\[\d*\]/g),jQuery.each(j,function(a,b){var d;b=b.match(/\d+/),null!==c?(d=i[c],i=g(d)?d:i[c]=[]):i.push(i=[]),c=b?+b:b})):(void 0!==h[a+1]&&(k=i[b],i=f(k)?k:i[b]={}),d=b)}),g(i)?e(c)?i[c]=b:i.push(b):i[d]=b},h=function(a){var b=this;jQuery.each(a,function(a,d){c.call(b,a,d)})};this.get=function(c){return d(c)?a.call(this,c):g(c)?b.call(this,c):void 0},this.set=function(a,b){d(a)?c.call(this,a,b):f(a)&&h.call(this,a)},this.reset=function(a){this._data={},f(a)&&this.set(a)},this.toString=function(){return JSON.stringify(this._data)},this.toJSON=function(){return JSON.parse(this.toString())}}).call(q.prototype);var r=function(){var a=this;a.config=new q,a.data=new q,a._views={},a._mixins={},a._modules={},a._fns={},a._services={},jQuery(function(){jQuery("[data-view]").each(function(){var b,c=jQuery(this),d=c.attr("data-view"),e=(c.attr("data-config")||"").trim();if(e.length){try{e=JSON.parse(JSON.stringify((1,eval)("("+e+")")))}catch(g){throw new Error("data-config for "+d+" is malformed")}if(!f(e))throw new Error("data-config for "+d+" should be a view configuration object")}if(b=a.view(d),!b)throw new Error(d+" is not a defined view");c.replaceWith(b.create(e).el)})})};return function(){var a=function(a){return function(){var b=this["_"+a+"s"],c=[];jQuery.each(b,function(a,b){b&&c.push(a)}),console.log(c.join(", "))}},d=function(a){return function(c,d){var e=this["_"+a+"s"],f=e[c];return d?(f?console.warn("The "+a+' "'+c+'" is already defined. Use aldera.'+a+"s() to log all "+a+"s."):"view"===a?e[c]=new p(c,d):"service"===a?e[c]=d(b):e[c]=d(),this):f}};this.compileTemplates=function(a){var b=aldera.config.get("template.paths"),d=[];jQuery.each(b,function(a,b){var e;c[a]||(e=j(b),d.push(e),c[a]=e)}),jQuery.when.apply(jQuery,d).done(function(){a&&a()})},this.view=d("view"),this.views=a("view"),this.mixin=d("mixin"),this.mixins=a("mixin"),this.module=d("module"),this.modules=a("module"),this.fn=d("fn"),this.fns=a("fn"),this.service=d("service"),this.services=a("service"),this.root=b,this.version="0.3.0-rc.1"}.call(r.prototype),new r}($);
//# sourceMappingURL=aldera-0.3.0-rc.1.min.js.map